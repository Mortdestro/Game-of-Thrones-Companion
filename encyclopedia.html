<html>
	<head>
		<script src="jquery/jquery-1.9.1.js"></script>
		<script src="XMLParse.js"></script>
		<script src="info_functions.js"></script>
		<script src="encyclopedia.js"></script>
		<link href="style2.css" rel="stylesheet" type="text/css" />
		<script>
			var charId, character, season, episode, time;
			var params = new Array();

			function init() {
				loadXMLDoc("data.xml");
				querySearch();
				charId = params["id"];
				season = parseInt(localStorage.season);
				episode = parseInt(localStorage.episode);
				time = parseInt(localStorage.time);
				character = getCharacter(charId);
				$("#name").append(loadName(character));
				jQuery("<img/>", {src: "character_images/" + charId + '.jpg'}).appendTo("#picture");
				loadFacts(character);
			}

			// Search the query for the character ID
			function querySearch() {
				var query = window.location.search.substring(1);
				var kvPairs = query.split('&');
				for (var i = 0; i < kvPairs.length; i++) {
					var pos = kvPairs[i].indexOf('=');
					if (pos > 0) {
						var key = kvPairs[i].substring(0, pos);
						var val = kvPairs[i].substring(pos + 1);
						params[key] = val;
					}
				}
			}
		</script>
	</head>

	<body onload="init()">
		<div id="content">
			<div id="name"></div>
			<div id="profile">
				<div id="picture"></div>
				<div id="stats">
					<table id="statlist">
						<tbody></tbody>
					</table>
				</div>
			</div>
			<div id="facts">
				<div id="facts-label">
					<h2>What We Know</h2>
				</div>
				<div id="facts-content">
					<ul id="list">
					</ul>
				</div>
			</div>
		</div>
	</body>
</html>